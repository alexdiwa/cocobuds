<div class="custom-container mt-5 text-center">
  <% if current_user.stripe_payment == true%>
    <h3 class="display-6 mb-5">
      Help keep us running by donating a gold coin.
    </h3>    
  <% else %>
    <h3 class="display-6">
      As we are entirely volunteer-run, we rely on donations from our users to keep our service running. All we ask is for a gold-coin donation, no further payment required. Thanks for understanding!
    </h3>
  <% end %>
  <button id="stripePayment" class="btn btn-primary btn-default btn-lg mt-3">Donate $1</button>
</div>
<script>
  document.getElementById("stripePayment").addEventListener("click", function() {

      var stripe = Stripe('<%= Rails.application.credentials.dig(:stripe, :public) %>');

      stripe.redirectToCheckout({
        sessionId: '<%= @stripe_session_id %>',
      }).then(function (result) {
        // If `redirectToCheckout` fails due to a browser or network
        // error, display the localized error message to your customer
        // using `result.error.message`.
      });

  });
</script>

